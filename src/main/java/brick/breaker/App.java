/*
 * This Java source file was generated by the Gradle 'init' task.
 */

package brick.breaker;

import brick.breaker.components.vectors.PVector;
import brick.breaker.interfaces.Vector;
import brick.breaker.systems.managers.GameManager;
import processing.core.PApplet;

/**
 * Brick Breaker Clone.
 * Implemented with Processing library for Graphics.
 */
public class App extends PApplet {

  private static final int WIDTH = 1200;
  private static final int HEIGHT = 600;
  private static final int GAMEWIDTH = WIDTH / 2;
  private static final int GAMEHEIGHT = HEIGHT;

  private GameManager gameManager;

  /**
   * Pre-configuration for {@link App}.
   * Used to pass variables to {@link PApplet}
   */
  public void settings() {
    size(WIDTH, HEIGHT);
  }

  /**
   * Pre-run configuration for {@link PApplet}.
   * All code is only run once per instance of app.
   * Used to set window size / instantiate objects.
   */
  public void setup() {
    rectMode(CENTER);
    gameManager = GameManager.getInstance();
    Vector gameWindowMin = new PVector()
        .set(WIDTH / 2 - GAMEWIDTH / 2, HEIGHT / 2 - GAMEHEIGHT / 2);
    Vector gameWindowMax = new PVector()
        .set(WIDTH / 2 + GAMEWIDTH / 2, HEIGHT / 2 + GAMEHEIGHT / 2);
    gameManager.setSize(gameWindowMin, gameWindowMax);
    gameManager.setup(this);
  }

  /**
   * Runtime code for {@link PApplet}.
   * All code is run at 60 fps by default.
   */
  public void draw() {
    gameManager.update(this);
    gameManager.render(this);
  }

  /**
   *  Starts program with an instance of {@link PApplet}.
   *
   *  @param args command line arguments
   */
  public static void main(String[] args) {
    String[] processingArgs = { "App" };
    App app = new App();
    PApplet.runSketch(processingArgs, app);
  }
}
